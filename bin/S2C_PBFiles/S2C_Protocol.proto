syntax = "proto3";

package S2C_Protocol;
option csharp_namespace = "Google.Protobuf.Protocol";

enum MsgId {
    S_WELCOME = 0;
    C_WELCOME = 1;
    S_WELCOME_RESPONSE = 2;
    S_ENCRYPTED = 3;
    C_ENCRYPTED = 4;
    C_LOGIN = 5;
    S_LOGIN = 6;
    C_CREATE_ACCOUNT = 7;
    S_CREATE_ACCOUNT = 8;
}

message S_Encrypted {
    bytes iv = 1;
    bytes ciphertext = 2;
    bytes tag = 3;
    int32 msgId = 4;
}

message C_Encrypted {
    bytes iv = 1;
    bytes ciphertext = 2;
    bytes tag = 3;
    int32 msgId = 4;
} 

message S_Welcome {
    bytes publicKey = 1;
    int32 gameversion = 2;
}

message C_Welcome {
    bytes aesKey = 1;
    string message = 2;
}

message S_WelcomeResponse {
    string message = 1;
    bool success = 2;
}

message C_Login {
    string id = 1;
    string password = 2;
}

message S_Login {
    oneof value_case {
        int32 dbid = 1;
        string err = 2;
    }
}

message C_CreateAccount {
    string id = 1;
    string password = 2;
}

message S_CreateAccount {
    bool success = 1;
    string err = 2;
}
